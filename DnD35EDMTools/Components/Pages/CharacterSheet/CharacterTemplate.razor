@page "/CharacterTemplate"

@using DnD35EDMTools.Data
@using DnD35EDMTools.Data.Classes
@using DnD35EDMTools.Helpers
@using Microsoft.EntityFrameworkCore
@inherits DnD35EDMTools.Components.Pages.Common.BaseComponent

<PageTitle>Character Template</PageTitle>

<div class="dnd-container">
<div class="dnd-main-content">
<div>
    <select class="cc-select" id="character-id" name="character" @bind="SelectedCharacterId">
        @foreach (var id in _characters)
        {
            <option value="@id.Id" title="@id.Name">@id.Name</option>
        }
    </select>
    <button
        @onclick="() => LoadCharacterAsync(SelectedCharacterId)">
        Load
    </button>
</div>

<div class="dnd-character-sheet-header">@(_characterName)</div>
<div class="dnd-character-sheet">
<div class="dnd-cs-top-section">
<div class="dnd-cs-top__left">
<div class="attributes-row">
    <div class="attributes-row-header">Attributes</div>
    <div class="attributes-row-content">
        <div class="dnd-cs-image-container">
            <img src="images/Portrait_Blank.jpg" alt="Character Portrait">
        </div>
        <div class="attributes-content">
            <div class="attribute-list">
                <div class="attribute-list-row-header">Class</div>
                <div class="attribute-list__content"> @_characterClass</div>
            </div>
            <div class="attribute-list">
                <div class="attribute-list-row-header">Race</div>
                <div class="attribute-list__content"> @_characterRace</div>
            </div>
            <div class="attribute-list">
                <div class="attribute-list-row-header">Experience</div>
                <div class="attribute-list__content"> @_characterExperience</div>
            </div>
            <div class="attribute-list">
                <div class="attribute-list-row-header">Hitpoints</div>
                <div class="attribute-list__content"> @_characterHitPoints</div>
            </div>
            <div class="attribute-list">
                <div class="attribute-list-row-header">Alignment</div>
                <div class="attribute-list__content"> @_characterAlignment</div>
            </div>
            <div class="attribute-list">
                <div class="attribute-list-row-header">Deity</div>
                <div class="attribute-list__content"> @_characterDeity</div>
            </div>
            <div class="attribute-list">
                <div class="attribute-list-row-header">Age</div>
                <div class="attribute-list__content"> @_characterAge</div>
            </div>
            <div class="attribute-list">
                <div class="attribute-list-row-header">Gender</div>
                <div class="attribute-list__content"> @_characterGender</div>
            </div>
            <div class="attribute-list">
                <div class="attribute-list-row-header">Eyes</div>
                <div class="attribute-list__content"> @_characterEyes</div>
            </div>
            <div class="attribute-list">
                <div class="attribute-list-row-header">Hair</div>
                <div class="attribute-list__content"> @_characterHair</div>
            </div>
            <div class="attribute-list">
                <div class="attribute-list-row-header">Skin</div>
                <div class="attribute-list__content"> @_characterSkin</div>
            </div>
            <div class="attribute-list">
                <div class="attribute-list-row-header">Weight</div>
                <div class="attribute-list__content"> @_characterWeight</div>
            </div>
            <div class="attribute-list">
                <div class="attribute-list-row-header">Height</div>
                <div class="attribute-list__content"> @_characterHeight</div>
            </div>
            <div class="attribute-list">
                <div class="attribute-list-row-header">Player</div>
                <div class="attribute-list__content"> @_characterPlayerName</div>
            </div>
        </div>
    </div>
</div>
<div class="languages-row">
    <div class="languages-row-header">Languages</div>
    @for (int row = 0; row < 7; row++)
    {
        <div class="languages-list">
            @for (int col = 0; col < 3; col++)
            {
                int index = row * 3 + col;
                <div class="languages-list-row-content">@_characterLanguages[index]</div>
            }
        </div>
    }
</div>
<div class="wealth-row">
    <div class="wealth-row-header">Wealth</div>
    <div class="wealth-list">
        <div class="wealth-list-row-header">PP</div>
        <div class="wealth-list-row-header">GP</div>
        <div class="wealth-list-row-header">SP</div>
        <div class="wealth-list-row-header">CP</div>
        <div class="wealth-list-row-header">Bank</div>
        <div class="wealth-list-row-header">Interest</div>
    </div>
    <div class="wealth-list">
        <div class="wealth-list-row-content">@_characterPlatinum</div>
        <div class="wealth-list-row-content">@_characterGold</div>
        <div class="wealth-list-row-content">@_characterSilver</div>
        <div class="wealth-list-row-content">@_characterCopper</div>
        <div class="wealth-list-row-content"></div>
        <div class="wealth-list-row-content"></div>
    </div>
    <div class="load-speed-list">
        <div class="load-speed-list-row-header">Weight Carried</div>
        <div class="load-speed-list-row-header">Speed</div>
        <div class="load-speed-list-row-header">Initiative</div>
    </div>
    <div class="load-speed-list">
        <div class="load-speed-list-row-content"></div>
        <div class="load-speed-list-row-content">@_characterSpeed</div>
        <div class="load-speed-list-row-content"></div>
    </div>
    <div class="load-speed-list">
        <div class="load-speed-list-row-header">Light Load</div>
        <div class="load-speed-list-row-header">Lift Over Head</div>
        <div class="load-speed-list-row-header">Arcane Spell Failure</div>
    </div>
    <div class="load-speed-list">
        <div class="load-speed-list-row-content">@_characterLightLoad</div>
        <div class="load-speed-list-row-content">@_characterLiftOverHead</div>
        <div class="load-speed-list-row-content"></div>
    </div>
    <div class="load-speed-list">
        <div class="load-speed-list-row-header">Medium Load</div>
        <div class="load-speed-list-row-header">Lift off Ground</div>
        <div class="load-speed-list-row-header">Base Attack Bonus</div>
    </div>
    <div class="load-speed-list">
        <div class="load-speed-list-row-content">@_characterMediumLoad</div>
        <div class="load-speed-list-row-content">@_characterLiftOffGround</div>
        <div class="load-speed-list-row-content"></div>
    </div>
    <div class="load-speed-list">
        <div class="load-speed-list-row-header">Heavy Load</div>
        <div class="load-speed-list-row-header">Push or Drag</div>
        <div class="load-speed-list-row-header">Spell Resistance</div>
    </div>
    <div class="load-speed-list">
        <div class="load-speed-list-row-content">@_characterHeavyLoad</div>
        <div class="load-speed-list-row-content">@_characterPushOrDrag</div>
        <div class="load-speed-list-row-content"></div>
    </div>
</div>
<div class="abilities-row">
    <div class="abilities-list">
        <div class="abilities-row-header">Abilities</div>
        <div class="abilities-row-header">Score</div>
        <div class="abilities-row-header">Modifier</div>
        <div class="abilities-row-header">Saves</div>
        <div class="abilities-row-header">Total</div>
    </div>
    <div class="abilities-list">
        <div class="abilities-list-row-header">STR</div>
        <div class="abilities-list-row-content">@_characterStrength</div>
        <div class="abilities-list-row-content">@_characterStrengthMod</div>
        <div class="abilities-list-row-header">Fortitude</div>
        <div class="abilities-list-row-content">@_characterFortSave</div>
    </div>
    <div class="abilities-list">
        <div class="abilities-list-row-header">DEX</div>
        <div class="abilities-list-row-content">@_characterDexterity</div>
        <div class="abilities-list-row-content">@_characterDexterityMod</div>
        <div class="abilities-list-row-header">Reflex</div>
        <div class="abilities-list-row-content">@_characterRefSave</div>
    </div>
    <div class="abilities-list">
        <div class="abilities-list-row-header">CON</div>
        <div class="abilities-list-row-content">@_characterConstitution</div>
        <div class="abilities-list-row-content">@_characterConstitutionMod</div>
        <div class="abilities-list-row-header">Will</div>
        <div class="abilities-list-row-content">@_characterWillSave</div>
    </div>
    <div class="abilities-list">
        <div class="abilities-list-row-header">INT</div>
        <div class="abilities-list-row-content">@_characterIntelligence</div>
        <div class="abilities-list-row-content">@_characterIntelligenceMod</div>
        <div class="abilities-list-row-header">Other Stats</div>
        <div class="abilities-list-row-header">Total</div>
    </div>
    <div class="abilities-list">
        <div class="abilities-list-row-header">WIS</div>
        <div class="abilities-list-row-content">@_characterWisdom</div>
        <div class="abilities-list-row-content">@_characterWisdomMod</div>
        <div class="abilities-list-row-header">Avatar Points</div>
        <div class="abilities-list-row-content"></div>
    </div>
    <div class="abilities-list">
        <div class="abilities-list-row-header">CHA</div>
        <div class="abilities-list-row-content">@_characterCharisma</div>
        <div class="abilities-list-row-content">@_characterCharismaMod</div>
        <div class="abilities-list-row-header">Essentia Points</div>
        <div class="abilities-list-row-content"></div>
    </div>
    <div class="abilities-list">
        <div class="abilities-list-row-header">LCK</div>
        <div class="abilities-list-row-content">@_characterLuck</div>
        <div class="abilities-list-row-content">@_characterLuckMod</div>
        <div class="abilities-list-row-header">Reputation</div>
        <div class="abilities-list-row-content"></div>
    </div>
</div>
<div class="dr-immunities-row">
    <div class="dr-immunities-list-row-header">Damage Reduction</div>
    <div class="dr-immunities-list-row-content"></div>
    <div class="dr-immunities-list-row-header">Immunities</div>
    <div class="dr-immunities-list-row-content"></div>
</div>
<div class="worn-armour-row">
    <div class="worn-armour-list">
        <div class="worn-armour-row-header">Worn Armour</div>
        <div class="worn-armour-row-header">AC</div>
        <div class="worn-armour-row-header">Check</div>
        <div class="worn-armour-row-header">Type</div>
        <div class="worn-armour-row-header">Max Dex</div>
    </div>
    <div class="worn-armour-list">
        <div class="worn-armour-list-row-content"></div>
        <div class="worn-armour-list-row-content"></div>
        <div class="worn-armour-list-row-content"></div>
        <div class="worn-armour-list-row-content"></div>
        <div class="worn-armour-list-row-content"></div>
    </div>
    <div class="worn-armour-list">
        <div class="worn-armour-list-row-content"></div>
        <div class="worn-armour-list-row-content"></div>
        <div class="worn-armour-list-row-content"></div>
        <div class="worn-armour-list-row-content"></div>
        <div class="worn-armour-list-row-content"></div>
    </div>
</div>
<div class="armour-row">
    <div class="armour-list">
        <div class="armour-row-header">Armour</div>
        <div class="armour-row-header">Total</div>
        <div class="armour-row-header"></div>
        <div class="armour-row-header">Base</div>
        <div class="armour-row-header">AC</div>
        <div class="armour-row-header">Ability</div>
        <div class="armour-row-header">Nat</div>
        <div class="armour-row-header">Other</div>
    </div>
    <div class="armour-list">
        <div class="armour-row-header">Armour Class</div>
        <div class="armour-list-row-content"></div>
        <div class="armour-row-header">=</div>
        <div class="armour-list-row-content"></div>
        <div class="armour-list-row-content"></div>
        <div class="armour-list-row-content"></div>
        <div class="armour-list-row-content"></div>
        <div class="armour-list-row-content"></div>
    </div>
    <div class="armour-list">
        <div class="armour-row-header">Flat Footed</div>
        <div class="armour-list-row-content"></div>
        <div class="armour-row-header">=</div>
        <div class="armour-list-row-content"></div>
        <div class="armour-list-row-content"></div>
        <div class="armour-list-row-content"></div>
        <div class="armour-list-row-content"></div>
        <div class="armour-list-row-content"></div>
    </div>
    <div class="armour-list">
        <div class="armour-row-header">Touch</div>
        <div class="armour-list-row-content"></div>
        <div class="armour-row-header">=</div>
        <div class="armour-list-row-content"></div>
        <div class="armour-list-row-content"></div>
        <div class="armour-list-row-content"></div>
        <div class="armour-list-row-content"></div>
        <div class="armour-list-row-content"></div>
    </div>
</div>
<div class="weapon-row">
    <div class="weapon-list-left">
        <div class="weapon-row-header">Weapon</div>
        <div class="weapon-row-header">Full Attack</div>
        <div class="weapon-row-header">Damage</div>
    </div>
    <div class="weapon-list-left">
        <div class="weapon-list-row-content"></div>
        <div class="weapon-list-row-content"></div>
        <div class="weapon-list-row-content"></div>
    </div>
    <div class="weapon-list-left">
        <div class="weapon-list-row-content"></div>
        <div class="weapon-list-row-content"></div>
        <div class="weapon-list-row-content"></div>
    </div>
    <div class="weapon-list-left">
        <div class="weapon-list-row-content"></div>
        <div class="weapon-list-row-content"></div>
        <div class="weapon-list-row-content"></div>
    </div>
    <div class="weapon-list-left">
        <div class="weapon-list-row-content"></div>
        <div class="weapon-list-row-content"></div>
        <div class="weapon-list-row-content"></div>
    </div>
    <div class="weapon-list-left">
        <div class="weapon-list-row-content"></div>
        <div class="weapon-list-row-content"></div>
        <div class="weapon-list-row-content"></div>
    </div>
    <div class="weapon-list-left">
        <div class="weapon-list-row-content"></div>
        <div class="weapon-list-row-content"></div>
        <div class="weapon-list-row-content"></div>
    </div>
</div>
</div>
<div class="dnd-cs-top__right">
    <div class="skills-row">
        <div class="skills-row-header">Skills</div>
        <div class="skills-row-header">Ranks</div>
        <div class="skills-row-header">Modifier</div>

        @for (int i = 0; i < MaxRows; i++)
        {
        var skill = i < Skills.Count ? Skills[i] : null;

        <div class="@RowHeaderClass(i)">
            @(skill?.Name ?? "")
        </div>

        <div class="@RowContentClass(i)">
            @(skill?.Ranks.ToString() ?? "")
        </div>

        <div class="@RowContentClass(i)">
            @(skill?.Modifier.ToString() ?? "")
        </div>
        }
    </div>

    <div class="weapon-row">
        <div class="weapon-list-right">
            <div class="weapon-row-header">Critical</div>
            <div class="weapon-row-header">Type</div>
            <div class="weapon-row-header">Range</div>
            <div class="weapon-row-header">Notes</div>
        </div>
        <div class="weapon-list-right">
            <div class="weapon-list-row-content"></div>
            <div class="weapon-list-row-content"></div>
            <div class="weapon-list-row-content"></div>
            <div class="weapon-list-row-content"></div>
        </div>
        <div class="weapon-list-right">
            <div class="weapon-list-row-content"></div>
            <div class="weapon-list-row-content"></div>
            <div class="weapon-list-row-content"></div>
            <div class="weapon-list-row-content"></div>
        </div>
        <div class="weapon-list-right">
            <div class="weapon-list-row-content"></div>
            <div class="weapon-list-row-content"></div>
            <div class="weapon-list-row-content"></div>
            <div class="weapon-list-row-content"></div>
        </div>
        <div class="weapon-list-right">
            <div class="weapon-list-row-content"></div>
            <div class="weapon-list-row-content"></div>
            <div class="weapon-list-row-content"></div>
            <div class="weapon-list-row-content"></div>
        </div>
        <div class="weapon-list-right">
            <div class="weapon-list-row-content"></div>
            <div class="weapon-list-row-content"></div>
            <div class="weapon-list-row-content"></div>
            <div class="weapon-list-row-content"></div>
        </div>
        <div class="weapon-list-right">
            <div class="weapon-list-row-content"></div>
            <div class="weapon-list-row-content"></div>
            <div class="weapon-list-row-content"></div>
            <div class="weapon-list-row-content"></div>
        </div>
    </div>
</div>
</div>
<div class="bottom-section"></div>
</div>
</div>
</div>

@code {

    #region Fields

    [Parameter] public int Row { get; set; }
    private const int MaxRows = 52;

    private List<OrderData> _orders = [];
    private List<MoralityData> _moralities = [];
    private List<CharacterData> _characters = [];
    private List<CharacterSkillDisplay> Skills { get; set; } = [];
    
    private string _characterName = string.Empty;
    private string _characterClass = string.Empty;
    private string _characterRace = string.Empty;
    private string _characterExperience = string.Empty;
    private int? _characterHitPoints;
    private string _characterAlignment = string.Empty;
    private string _characterDeity = string.Empty;

    private int? _characterAge;
    private string _characterGender = string.Empty;
    private string _characterEyes = string.Empty;
    private string _characterHair = string.Empty;
    private string _characterSkin = string.Empty;
    private string _characterWeight = string.Empty;
    private string _characterHeight = string.Empty;
    private string _characterPlayerName = string.Empty;

    private string[] _characterLanguages = new string[21];

    private int? _characterPlatinum;
    private int? _characterGold;
    private int? _characterSilver;
    private int? _characterCopper;

    private string _characterSpeed = string.Empty;
    
    private double? _characterLightLoad;
    private double? _characterMediumLoad;
    private double? _characterHeavyLoad;
    private double? _characterLiftOverHead;
    private double? _characterLiftOffGround;
    private double? _characterPushOrDrag;

    private int? _characterStrength;
    private int? _characterStrengthMod;
    private int? _characterDexterity;
    private int? _characterDexterityMod;
    private int? _characterConstitution;
    private int? _characterConstitutionMod;
    private int? _characterIntelligence;
    private int? _characterIntelligenceMod;
    private int? _characterWisdom;
    private int? _characterWisdomMod;
    private int? _characterCharisma;
    private int? _characterCharismaMod;
    private int? _characterLuck;
    private int? _characterLuckMod;

    private double? _characterFortSave;
    private double? _characterRefSave;
    private double? _characterWillSave;

    #endregion

    #region Calculated Properties

    private string RowHeaderClass(int row)
        => row % 2 == 1
            ? "skills-list-row-header-alt"
            : "skills-list-row-header";

    private string RowContentClass(int row)
        => row % 2 == 1
            ? "skills-list-row-content-alt"
            : "skills-list-row-content";

    #endregion
    
    #region Lifecycle Methods

    protected override async Task OnInitializedAsync()
    {
        await using var db = CreateDbContext();
        _characters = await db.Characters
            .AsNoTracking()
            .ToListAsync();

        _orders = await db.Orders.AsNoTracking().ToListAsync();
        _moralities = await db.Moralities.AsNoTracking().ToListAsync();

        for (var i = 0; i < _characterLanguages.Length; i++)
        {
            _characterLanguages[i] = string.Empty;
        }

        await base.OnInitializedAsync();
    }

    private int SelectedCharacterId { get; set; }

    #endregion

    #region Load Character

    private async Task LoadCharacterAsync(int characterId)
    {
        if (characterId <= 0)
        {
            return;
        }

        try
        {
            await using var db = CreateDbContext();
            var character = await db.Characters
                .AsNoTracking()
                .FirstOrDefaultAsync(c => c.Id == characterId);

            if (character is null)
                return;
            var campaignTask = db.Campaigns
                .AsNoTracking()
                .Where(c => c.Id == character.CampaignId)
                .FirstOrDefaultAsync();

            var classTask = db.Classes
                .Include(c => c.ClassSkills)
                .AsNoTracking()
                .FirstOrDefaultAsync(c => c.Id == character.Class);

            var raceTask = db.Races.AsNoTracking().FirstOrDefaultAsync(r => r.Id == character.Race);
            var deityTask = db.Deities.Where(d => d.Id == character.Deity).Select(d => d.Name).FirstOrDefaultAsync();
            var genderTask = db.Genders.Where(g => g.Id == character.Gender).Select(g => g.Gender).FirstOrDefaultAsync();

            var colorIds = new[] { character.Eyes, character.Hair, character.Skin };
            var colorsTask = db.Colours
                .AsNoTracking()
                .Where(c => colorIds.Contains(c.Id))
                .ToDictionaryAsync(c => c.Id, c => c.Colour);

            var languagesTask = db.Languages
                .AsNoTracking()
                .Where(l => character.Languages.Contains(l.Id))
                .Select(l => l.Name)
                .ToListAsync();
            
            var skillsTask = db.Skills
                .AsNoTracking()
                .OrderBy(s => s.Name)
                .ToListAsync();
            
            await Task.WhenAll(campaignTask, classTask, raceTask, deityTask, genderTask, colorsTask, languagesTask, skillsTask);

            var campaign = await campaignTask;
            var hideTrainedOnly = campaign?.HideTrainedOnlySkills ?? false;
            
            var characterClass = await classTask;
            _characterClass = characterClass?.Name ?? string.Empty;
            
            var classSkillIds = characterClass?.ClassSkills?.Select(s => s.Id).ToHashSet() ?? [];

            var race = await raceTask;

            _characterDeity = await deityTask ?? string.Empty;
            _characterGender = await genderTask ?? string.Empty;

            var colors = await colorsTask;
            _characterEyes = colors.GetValueOrDefault(character.Eyes) ?? string.Empty;
            _characterHair = colors.GetValueOrDefault(character.Hair) ?? string.Empty;
            _characterSkin = colors.GetValueOrDefault(character.Skin) ?? string.Empty;

            var characterLanguageNames = await languagesTask;
            for (var i = 0; i < 21; i++)
            {
                _characterLanguages[i] = i < characterLanguageNames.Count
                    ? characterLanguageNames[i]
                    : string.Empty;
            }

            var allSkills = await skillsTask;
            Skills = allSkills
                .Select(skill =>
                {
                    var ranks = character.Skills.TryGetValue(skill.Id, out var r) ? r : 0;

                    var isClassSkill = classSkillIds.Contains(skill.Id);
                    var displayRanks = isClassSkill ? ranks : ranks * 0.5;

                    var attributeModifier = GetAttributeModifier(skill.Attribute, character);
                    var modifier = attributeModifier + (int)Math.Floor(displayRanks);

                    return new CharacterSkillDisplay
                    {
                        Name = skill.Name,
                        Ranks = (int)Math.Floor(displayRanks),
                        Modifier = modifier,
                        IsTrainedOnly = skill.IsTrainedOnly
                    };
                })
                .Where(skill =>
                {
                    if (hideTrainedOnly && skill.IsTrainedOnly && skill.Ranks == 0)
                    {
                        return false;
                    }
                    return true;
                })
                .ToList();

            _characterName = character.Name;
            _characterRace = race?.Race ?? string.Empty;
            _characterExperience = $"{character.Experience}/";
            _characterHitPoints = character.HitPoints;
            _characterAlignment = AlignmentHelper.GetAlignmentFromOrderAndMorality(_orders, _moralities, character.Order, character.Morality);
            _characterAge = character.Age;
            _characterWeight = $"{character.Weight} lbs.";
            _characterHeight = ConversionHelper.ConvertInchesToFeetAndInches(character.Height);
            _characterPlayerName = character.PlayerName ?? string.Empty;

            _characterPlatinum = character.PlatinumPieces;
            _characterGold = character.GoldPieces;
            _characterSilver = character.SilverPieces;
            _characterCopper = character.CopperPieces;

            _characterSpeed = $"{race?.BaseSpeed} ft.";

            _characterLightLoad = character.LightLoad;
            _characterMediumLoad = character.MediumLoad;
            _characterHeavyLoad = character.HeavyLoad;
            _characterLiftOverHead = character.LiftOverHead;
            _characterLiftOffGround = character.LiftOffGround;
            _characterPushOrDrag = character.PushOrDrag;

            _characterStrength = character.Strength;
            _characterStrengthMod = ConversionHelper.ConvertStatToBonus(character.Strength);
            _characterDexterity = character.Dexterity;
            _characterDexterityMod = ConversionHelper.ConvertStatToBonus(character.Dexterity);
            _characterConstitution = character.Constitution;
            _characterConstitutionMod = ConversionHelper.ConvertStatToBonus(character.Constitution);
            _characterIntelligence = character.Intelligence;
            _characterIntelligenceMod = ConversionHelper.ConvertStatToBonus(character.Intelligence);
            _characterWisdom = character.Wisdom;
            _characterWisdomMod = ConversionHelper.ConvertStatToBonus(character.Wisdom);
            _characterCharisma = character.Charisma;
            _characterCharismaMod = ConversionHelper.ConvertStatToBonus(character.Charisma);

            CalculateLuck();

            _characterFortSave = character.BaseFortitudeSave;
            _characterRefSave = character.BaseReflexSave;
            _characterWillSave = character.BaseWillSave;

            StateHasChanged();
        }
        catch (Exception ex)
        {
            await NotificationService.AddNotification(NotificationType.Error, $"Failed to load character {characterId}: {ex.Message}");
        }
    }

    #endregion

    #region Calculations

    private void CalculateLuck()
    {
        if (_characterStrength.HasValue &&
            _characterDexterity.HasValue &&
            _characterConstitution.HasValue &&
            _characterIntelligence.HasValue &&
            _characterWisdom.HasValue &&
            _characterCharisma.HasValue)
        {
            _characterLuck = (_characterStrength +
                              _characterDexterity +
                              _characterConstitution +
                              _characterIntelligence +
                              _characterWisdom +
                              _characterCharisma) / 6;

            _characterLuckMod = ConversionHelper.ConvertStatToBonus(_characterLuck.Value);
        }
    }
    
    private int GetAttributeModifier(string? attribute, CharacterData character)
    {
        return attribute switch
        {
            "STR" or "Strength" => ConversionHelper.ConvertStatToBonus(character.Strength),
            "DEX" or "Dexterity" => ConversionHelper.ConvertStatToBonus(character.Dexterity),
            "CON" or "Constitution" => ConversionHelper.ConvertStatToBonus(character.Constitution),
            "INT" or "Intelligence" => ConversionHelper.ConvertStatToBonus(character.Intelligence),
            "WIS" or "Wisdom" => ConversionHelper.ConvertStatToBonus(character.Wisdom),
            "CHA" or "Charisma" => ConversionHelper.ConvertStatToBonus(character.Charisma),
            _ => 0
        };
    }

    #endregion

}